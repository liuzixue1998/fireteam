doctype html
html
        head
        include ../layout/head.jade
        title 帖子信息管理页面
        link(rel='stylesheet', href='/stylesheets/style.css')
        script(type='text/javascript' src='/javascripts/jquery-3.2.1.min.js')
        link(rel="stylesheet" type="text/css" href="DataTables-1.10.15/media/css/jquery.dataTables.css")
        link(rel='stylesheet', href='/bootstrap-3.3.7-dist/css/bootstrap.min.css')
        script(src='/bootstrap-3.3.7-dist/js/bootstrap.min.js')
        script(type="text/javascript" charset="utf8" src="DataTables-1.10.15/media/js/jquery.dataTables.js")
        style.
            .wrapper{
                width:1500px;
                height:900px;
                position:relative;
                top:-5rem;
                left:-5rem;
            }
            .col-md-9{
                position:relative;
                top:-91rem;
                left:6rem;
                width:1290px;
                height:300px;
            }
    body.hold-transition.skin-blue.sidebar-mini
        div.wrapper
            include ../layout/nav.jade
            include ../layout/sidebar.jade

            div.content-wrapper
                block content
            div.control-sidebar-bg


        .container
            .row
                .logo(align='center')
                .col-md-9
                    .panel.panel-default(style='margin-top:10px;border:1px')
                        .panel-heading(style='background: #0d6aad')
                            h3(align='center' style='color:white')
                                |帖子信息管理
                        .panel-body(style ='background:#e0e1ea')
                            .form-group
                                button.btn.btn-success(data-toggle='modal' data-target='#modal1')
                                    | 新增一条帖子信息
                            table.table#tb
                                thead
                                    tr
                                        th
                                            | ID
                                        th
                                            | 标题
                                        th
                                            | 图片
                                        th
                                            | 详情
                                        th
                                            | 操作
                                tbody
                                    each note in notes
                                        tr(class='#{note.class}')
                                            td #{note.id}
                                            td #{note.title}
                                            td #{note.url}
                                            td
                                                button.btn.btn-info.btn-sm.c3(data-toggle='modal' data-target='#modal3')
                                                    | 详情
                                            td
                                                button.btn.btn-primary.btn-sm.c1(data-toggle='modal' data-target='#modal2')
                                                    | 修改/隐藏
        .mode#modal1(tabindex='-1' role='dialog' aria-labelledby="label1"
        aria-hidden="true" class='modal fade' style='width:auto')
            .modal-dialog(style='width:1050px;')
                .modal-content
                    .modal-header
                        h4.modal-title#label1
                            | 新增一条管理员信息
                    .modal-body(style='width:1000px;')
                        table.table.table-bordered.table-striped(align='center')
                            thead
                                tr
                                    th(style='width:500px;')
                                        | 标题
                                    th(style='width:500px;')
                                        | 图片名字
                                    th(style='width:500px;')
                                        | 图片地址
                                    th(style='width:500px;')
                                        | 帖子描述
                                    th(style='width:500px;')
                                        | 时间
                            tbody
                                tr
                                    td
                                        input.form-control#a1(placeholder='输入标题')
                                    td
                                        input.form-control#a2(placeholder='图片名字')
                                    td
                                        input.form-control#a3(type='text' placeholder='图片地址')
                                    td
                                        input.form-control#a4(placeholder='帖子描述')
                                    td
                                        input.form-control#a5(type='date' placeholder='时间')
                    .modal-footer
                        button.btn.btn-default(data-dismiss="modal" type='button')
                            |取消
                        button.btn.btn-success.b2(type='button')
                            |保存
        .mode#modal2(tabindex='-1' role='dialog' aria-labelledby="label2"
        aria-hidden="true" class='modal fade' style='width:auto')
            .modal-dialog(style='width:1050px;')
                .modal-content
                    .modal-header
                        h4.modal-title#label2
                            | 修改专家信息
                    .modal-body(style='width:1000px;')
                        table.table.table-bordered.table-striped(align='center')
                            thead
                                tr.id2
                                    th(style='width:500px;')
                                        | 标题
                                    th(style='width:500px;')
                                        | 图片名字
                                    th(style='width:500px;')
                                        | 图片地址
                                    th(style='width:500px;')
                                        | 帖子描述
                                    th(style='width:500px;')
                                        | 时间
                            tbody
                                tr
                                    td
                                        input.form-control#a1(placeholder='输入标题')
                                    td
                                        input.form-control#a2(placeholder='图片名字')
                                    td
                                        input.form-control#a3(type='text' placeholder='图片地址')
                                    td
                                        input.form-control#a4(placeholder='帖子描述')
                                    td
                                        input.form-control#a5(type='date' placeholder='时间')
                    .modal-footer
                        button.btn.btn-default(data-dismiss="modal" type='button')
                            | 取消
                        button.btn.btn-danger.c2
                            | 隐藏
                        button.btn.btn-success.b3(type='button')
                            | 保存

        .mode#modal3(tabindex='-1' role='dialog' aria-labelledby="label3"
        aria-hidden="true" class='modal fade' style='width:auto')
            .modal-dialog
                .modal-content
                    .modal-header
                        h4.modal-title#label3
                            | 专家详细信息
                    .modal-body
                        table.table.table-bordered.table-striped(align='center')
                            thead
                                tr
                                    th(style='width:500px;')
                                        | 标题
                                    th(style='width:500px;')
                                        | 图片名字
                                    th(style='width:500px;')
                                        | 图片地址
                                    th(style='width:500px;')
                                        | 帖子描述
                                    th(style='width:500px;')
                                        | 时间
                            tbody
                                    each note in notes
                                        tr(class='#{note.class}')
                                            td #{note.title}
                                            td #{note.imgn}
                                            td #{note.url}
                                            td #{note.des}
                                            td #{note.date}

        script(type='text/javascript').
            $(document).ready(function () {
                $('.b2').click(function () {
                    if ($('#a1').val() == '') {
                        alert('请输入姓名！')}
                    else {
                        if (confirm('确认将信息保存到数据库？')) {
                            $.ajax({
                                url: 'post/postpost',
                                data: {
                                    title: $('#a1').val(),
                                    imgn: $('#a2').val(),
                                    url: $('#a3').val(),
                                    des: $('#a4').val(),
                                    date: $('#a5').val(),
                                },
                                type: 'POST',
                                timeout: 36000,
                                dataType: 'text',
                                success: function (data, textStatus) {
                                }
                            });
                        window.location.href = 'guanli2';
                            }
                    }
                });

                $('.c2').click(function () {
                    if(confirm('确认隐藏该专家信息?')){
                        $(this).parents('tr').remove();
                        var id2 = $('.c2').val();
                        $.ajax({
                            url: 'post/postpost2',
                            data: {
                                id2: id2
                            },
                            type: 'POST',
                            timeout: 36000,
                            dataType: 'text',
                            success: function (data, textStatus) {
                            }
                        });
                    window.location.href = 'guanli2';
                    }
                });
                $('.c1').click(function () {
                    var id2 = $(this).parents('tr').children('td').html();
                    var id1 = $(this).parents('tr').children('td').next().html();
                    var id4 = $(this).parents('tr').children('td').next().next().html();
                    var id3 = $(this).parents('tr').children('td').next().next().next().html();
                    var s1 = $(this).parents('tr').children('td').next().next().next().next().html();
                    var s2 = $(this).parents('tr').children('td').next().next().next().next().next().html();
                    var s3 = $(this).parents('tr').children('td').next().next().next().next().next().next().html();
                    var s4 = $(this).parents('tr').children('td').next().next().next().next().next().next().next().html();
                    var s5 = $(this).parents('tr').children('td').next().next().next().next().next().next().next().next().html();
                    $('.id2').val(id2);
                    $('.c2').val(id2);
                    $('.nam').val(id1);
                    $('.depr').val(id3);
                    $('.sex').val(id4);
                    $('.s1').val(s1);
                    $('.s2').val(s2);
                    $('.s3').val(s3);
                    $('.s4').val(s4);
                    $('.s5').val(s5);
                });
                $('.b3').click(function () {
                    if($('#a9').val() == '')
                    {
                        alert('请输入姓名！')
                    }
                    else {
                        if (confirm('确认对该专家信息的修改?')) {

                            $.ajax({
                                url: 'post/postpost3',
                                data: {
                                    title: $('#a1').val(),
                                    imgn: $('#a2').val(),
                                    url: $('#a3').val(),
                                    des: $('#a4').val(),
                                    date: $('#a5').val(),
                                },
                                type: 'POST',
                                timeout: 36000,
                                dataType: 'text',
                                success: function (data, textStatus) {
                                }
                            });
                        window.location.href = 'guanli2';
                        }
                    }

                });

                $('#tb').DataTable({
                    "oLanguage": {
                        "oAria": {
                            "sSortAscending": " - click/return to sort ascending",
                            "sSortDescending": " - click/return to sort descending"
                        },
                        "sLengthMenu": "显示 _MENU_ 记录",
                        "sZeroRecords": "对不起，查询不到任何相关数据",
                        "sEmptyTable": "未有相关数据",
                        "sLoadingRecords": "正在加载数据-请等待...",
                        "sInfo": "当前显示 _START_ 到 _END_ 条，共 _TOTAL_ 条记录。",
                        "sInfoEmpty": "当前显示0到0条，共0条记录",
                        "sInfoFiltered": "（数据库中共为 _MAX_ 条记录）",
                        "sProcessing": "<img src='../resources/user_share/row_details/select2-spinner.gif'/> 正在加载数据...",
                        "sSearch": "模糊查询：",
                        "sUrl": "",
                        "oPaginate": {
                            "sFirst": "首页",
                            "sPrevious": " 上一页 ",
                            "sNext": " 下一页 ",
                            "sLast": " 尾页 "
                        }
                    }

                });
            })


